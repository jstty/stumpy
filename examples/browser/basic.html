<html>
<script src="sprintf.min.js"></script>
<script src="moment.min.js"></script>
<script src="../../lib/stumpy.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<pre id="stumpy">-- Stumpy - Basic --
</pre>

<script>

var stumpy = Stumpy("basic", {
    display: true,
    formatFunc: function(options, log) {
        var out = [];
        var a = 0;

        // add time
        var td = moment().format('YYYY-MM-DD HH:mm:ssZ');

        // if first arg is string add time to it to support % replacement
        if(typeof log.args[0] === "string") {
            out.push( "["+td+"] "+options.name+" - " + log.args[0] );
            a++;
        } else {
            out.push("["+td+"] "+options.name+" - ");
        }

        // add args
        for(; a < log.args.length; a++) {
            // if show time, and first item
            out.push( log.args[a] );
        }

        return out;
    }
	,buffer: {
		size: 8,
        showTrace: true,
        formatFunc: function(options, log) {
            var out = [];
            var a = 0;

            // add time
            var td = moment(log.date).format('h:mm:ss a');

            // if first arg is string add time to it to support % replacement
            if(typeof log.args[0] === "string") {
                out.push( td + " - " + log.args[0] );
                a++;
            } else {
                out.push(td + " - ");
            }

            // add args
            for(; a < log.args.length; a++) {
                // if show time, and first item
                out.push( log.args[a] );
            }

            // show trace
            if(log.trace) {
                out.push("-> " + log.trace );
            }

            return out;
        }
	}
});

console.log("----------------------------------------------------------");
console.log("-- Log Output --");
console.log("----------------------------------------------------------");
stumpy.log("test");
stumpy.info("test: %s", "string");
stumpy.warn("test: %d", 123);
stumpy.error("test error: %d", 123);
stumpy.trace("test trace: %s", "string");

stumpy.log("before group");

stumpy.group();
    stumpy.log("test group log", "Group", 1);
    stumpy.warn("test group warn", { obj: "Group1" } );
    stumpy.error("test group error: %d", 123);

    stumpy.group("test group 2");
        stumpy.log("test", "Group", 2);
        stumpy.warn("test", { obj: "Group2" } );
    stumpy.groupEnd();

stumpy.groupEnd();

stumpy.log( { after: "group", a: [1,2,3,4,5,6,7,8,9,0] } );

console.log("----------------------------------------------------------");
console.log("-- Dumping Buffered Output --");
console.log("----------------------------------------------------------");
var dump = stumpy.getBuffer();
dump = dump.join("\n");
$('#stumpy').append(dump);
console.log(dump);

console.log("----------------------------------------------------------");
console.log("-- Pretty Printing Buffered Output --");
console.log("----------------------------------------------------------");
stumpy.printBuffer();

console.log("----------------------------------------------------------");
console.log("-- Dumping Raw Buffered Output --");
console.log("----------------------------------------------------------");
var rawdump = stumpy.getRawBuffer();
$('#stumpy').append( rawdump );
console.log(rawdump);

</script>
</html>